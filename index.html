<!DOCTYPE html>
<html lang="en" class="custom-scrollbar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Quantum Forge company intranet - Your enhanced digital workspace for collaboration, innovation, and growth">
    <meta name="theme-color" content="#6366f1">
    
    <!-- Enhanced Accessibility Meta Tags -->
    <meta name="keywords" content="intranet, digital workspace, collaboration, productivity, team management, workplace technology">
    <meta name="author" content="Quantum Forge Team">
    <meta name="robots" content="index, follow">
    <meta name="color-scheme" content="light dark">
    <meta name="supported-color-schemes" content="light dark">
    
    <!-- Accessibility: Prefers Reduced Motion -->
    <style>
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
            }
        }
        
        /* High Contrast Mode Support */
        @media (prefers-contrast: high) {
            :root {
                --border-color: #000000;
                --text-primary: #000000;
                --bg-elevated: #ffffff;
            }
        }
        
        /* Dark Mode Detection */
        @media (prefers-color-scheme: dark) {
            :root {
                --bg-primary: #0f172a;
                --text-primary: #f8fafc;
            }
        }
    </style>
    
    <!-- NEW: Enhanced SEO and Performance Meta Tags -->
    <meta name="keywords" content="intranet, digital workspace, collaboration, productivity, team management, workplace technology">
    <meta name="author" content="Quantum Forge Team">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="Quantum Forge - Enhanced Digital Workspace">
    <meta property="og:description" content="Next-generation employee portal with AI-powered features, real-time analytics, and seamless collaboration">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://quantum-forge.com">
    <meta property="og:image" content="https://quantum-forge.com/og-image.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Quantum Forge - Enhanced Digital Workspace">
    <meta name="twitter:description" content="Next-generation employee portal with AI-powered features, real-time analytics, and seamless collaboration">
    
    <!-- NEW: Performance Optimizations -->
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" href="styles/main.css" as="style">
    <link rel="preload" href="styles/enhanced.css" as="style">
    <link rel="preload" href="js/app.js" as="script">
    
    <!-- NEW: Critical CSS Inline -->
    <style>
        /* Critical rendering path CSS */
        body { margin: 0; font-family: 'Inter', sans-serif; }
        .dashboard { min-height: 100vh; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        /* Enhanced Loading Screen Styles */
        #loading-screen { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
            align-items: center; 
            z-index: 9999; 
            color: white;
            font-family: 'Inter', sans-serif;
        }
        .loading-content { text-align: center; }
        .loading-spinner { 
            width: 50px; 
            height: 50px; 
            border: 4px solid rgba(255,255,255,0.3); 
            border-top: 4px solid #ffffff; 
            border-radius: 50%; 
            animation: spin 1s linear infinite; 
            margin-bottom: 20px;
        }
        .loading-content h2 { margin: 10px 0; font-size: 24px; font-weight: 600; }
        .loading-content p { margin: 0; font-size: 16px; opacity: 0.8; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        /* Ensure body doesn't scroll when loading */
        body.loading { overflow: hidden; }
        
        /* CALENDAR ICON - Match Today's Insights exactly */
        .upcoming-events-title .custom-insights-icon {
            width: 32px !important;
            height: 32px !important;
            stroke: var(--welcome-text) !important;
            stroke-width: 2px !important;
            color: var(--welcome-text) !important;
            fill: none !important;
            filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2)) !important;
        }
        
        /* AGGRESSIVE TEAM ANALYTICS FIXES - Applied immediately */
        .team-analytics-panel,
        .team-analytics-panel *,
        .analytics-grid,
        .analytics-grid *,
        .analytics-card,
        .analytics-card *,
        .overview-stats,
        .overview-stats *,
        .overview-stat,
        .overview-stat *,
        .quick-stats,
        .quick-stats *,
        .stat-item,
        .stat-item *,
        .skill-category,
        .skill-category * {
            backdrop-filter: none !important;
            -webkit-backdrop-filter: none !important;
            filter: none !important;
            transform: none !important;
            color: var(--text-primary) !important;
            -webkit-text-fill-color: var(--text-primary) !important;
        }
        
        .overview-stat .stat-number {
            color: var(--text-primary) !important;
            -webkit-text-fill-color: var(--text-primary) !important;
            font-weight: 700 !important;
            text-shadow: none !important;
        }
        
        .overview-stat .stat-number.online {
            color: var(--success-600) !important;
            -webkit-text-fill-color: var(--success-600) !important;
        }
        
        .overview-stat .stat-label {
            color: var(--text-secondary) !important;
            -webkit-text-fill-color: var(--text-secondary) !important;
        }
        
        /* QUICK STATS FIXES */
        .quick-stats .stat-item .stat-value {
            color: var(--text-primary) !important;
            -webkit-text-fill-color: var(--text-primary) !important;
            font-weight: 700 !important;
            text-shadow: none !important;
        }
        
        .quick-stats .stat-item .stat-label {
            color: var(--text-secondary) !important;
            -webkit-text-fill-color: var(--text-secondary) !important;
        }
        
        .quick-stats .stat-item .stat-value.trend-up {
            color: var(--success-600) !important;
            -webkit-text-fill-color: var(--success-600) !important;
        }
        
        .quick-stats .stat-item .stat-value.trend-down {
            color: var(--error-600) !important;
            -webkit-text-fill-color: var(--error-600) !important;
        }
        
        /* SKILL CATEGORY FIXES */
        .skill-category {
            color: var(--text-secondary) !important;
            -webkit-text-fill-color: var(--text-secondary) !important;
        }
    </style>
    
    <title>Quantum Forge - Enhanced Digital Workspace</title>
    
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' rx='20' fill='%236366f1'/%3E%3Ctext x='50' y='70' font-family='Inter, sans-serif' font-size='60' fill='white' text-anchor='middle'%3EQ%3C/text%3E%3C/svg%3E">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- NEW: Enhanced Library Loading with Fallbacks -->
    <script>
        // Performance monitoring
        window.performance.mark('app-start');
        
        // Feature detection
        window.supportsWebGL = (function() {
            try {
                const canvas = document.createElement('canvas');
                return !!(window.WebGLRenderingContext && 
                    (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')));
            } catch(e) {
                return false;
            }
        })();
        
        // Service Worker Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/js/service-worker.js?v=2')
                    .then(registration => {
                        console.log('SW registered: ', registration);
                    })
                    .catch(registrationError => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
    </script>
    
    <!-- Three.js dependencies with fallback -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // Create OrbitControls if not available
        if (typeof THREE !== 'undefined' && !THREE.OrbitControls) {
            THREE.OrbitControls = function(object, domElement) {
                this.object = object;
                this.domElement = domElement;
                this.enabled = true;
                this.target = new THREE.Vector3();
                this.minDistance = 0;
                this.maxDistance = Infinity;
                this.minPolarAngle = 0;
                this.maxPolarAngle = Math.PI;
                this.enableDamping = false;
                this.dampingFactor = 0.05;
                this.enableZoom = true;
                this.zoomSpeed = 1.0;
                this.enableRotate = true;
                this.rotateSpeed = 1.0;
                this.enablePan = true;
                this.panSpeed = 1.0;
                this.screenSpacePanning = true;
                this.update = function() {
                    if (this.enabled) {
                        // Simple update for now
                        this.object.lookAt(this.target);
                    }
                };
            };
        }
    </script>
    
    <!-- Enhanced visualization libraries with error handling -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dayjs"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs/Sortable.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs/prism.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/prismjs/themes/prism.min.css" rel="stylesheet">
    
    <!-- NEW: Progressive Enhancement -->
    <script>
        // Check for modern browser features
        window.modernBrowser = !!(window.fetch && window.Promise && window.IntersectionObserver);
        
        // Graceful degradation for older browsers
        if (!window.modernBrowser) {
            document.documentElement.classList.add('legacy-browser');
        }
    </script>
    
    <!-- EMERGENCY MEMORY LEAK FIX - LOAD FIRST -->
    <script src="js/emergency-memory-fix.js"></script>
    
    <!-- ENHANCED ACCESSIBILITY FEATURES -->
    <script src="js/components/accessibility-enhancements.js"></script>
    
    <!-- RESTORED: Your original working CSS -->
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/enhanced.css">
    <!-- SPECTACULAR TASK MANAGEMENT SYSTEM STYLES -->
    <link rel="stylesheet" href="styles/enhanced-task-system.css">
    <link rel="stylesheet" href="styles/welcome-section.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="styles/simple-mobile.css">
    
    <!-- Additional CSS - Load Asynchronously for Better Performance -->
    <link rel="preload" href="styles/enhanced-colors.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="styles/company-news.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="styles/interactive-poll.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="styles/real-time-stats.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="styles/office-visualizer.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="styles/dream-workspace.css?v=7" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="stylesheet" href="styles/enhanced-knowledge-hub.css">
    <link rel="preload" href="styles/sidebar.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="styles/contest-enhancements.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="styles/culture-blur-fix.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="styles/team.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="styles/analytics-dashboard.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="styles/analytics-icons.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="styles/team-analytics-fix.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="styles/team-chat-widget.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="styles/component-enhancements.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="styles/smart-search-overlay.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="styles/mobile-performance-enhancements.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="styles/accessibility-enhancements.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    
    <!-- Fallback for browsers that don't support preload -->
    <noscript>
        <link rel="stylesheet" href="styles/enhanced-colors.css">
        <link rel="stylesheet" href="styles/company-news.css">
        <link rel="stylesheet" href="styles/interactive-poll.css">
        <link rel="stylesheet" href="styles/real-time-stats.css">
        <link rel="stylesheet" href="styles/office-visualizer.css">
        <link rel="stylesheet" href="styles/dream-workspace.css?v=7">
        <link rel="stylesheet" href="styles/enhanced-knowledge-hub.css">
        <link rel="stylesheet" href="styles/sidebar.css">
        <link rel="stylesheet" href="styles/contest-enhancements.css">
        <link rel="stylesheet" href="styles/culture-blur-fix.css">
        <link rel="stylesheet" href="styles/team.css">
        <link rel="stylesheet" href="styles/analytics-dashboard.css">
        <link rel="stylesheet" href="styles/analytics-icons.css">
        <link rel="stylesheet" href="styles/team-analytics-fix.css">
        <link rel="stylesheet" href="styles/team-chat-widget.css">
        <link rel="stylesheet" href="styles/component-enhancements.css">
        <link rel="stylesheet" href="styles/smart-search-overlay.css">
        <link rel="stylesheet" href="styles/mobile-performance-enhancements.css">
        <link rel="stylesheet" href="styles/accessibility-enhancements.css">
    </noscript>
    
    <!-- SERVICE WORKER REGISTRATION -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/js/service-worker.js')
                    .then(registration => console.log('SW registered'))
                    .catch(registrationError => console.log('SW registration failed'));
            });
        }
    </script>

    <!-- 🚨🚨🚨 ULTIMATE NUCLEAR CSS OVERRIDE - LOADS ABSOLUTELY LAST 🚨🚨🚨 -->
    <style id="knowledge-hub-nuclear-override">
        /* This loads LAST and overrides EVERYTHING */
        
        /* ULTIMATE FORCE SPECTACULAR BACKGROUND */
        html body .enhanced-knowledge-hub.spectacular-mode,
        html body .main-content .enhanced-knowledge-hub.spectacular-mode,
        html body .dashboard .enhanced-knowledge-hub.spectacular-mode {
            background: 
                linear-gradient(45deg, var(--primary-500) 0%, transparent 50%, var(--primary-500) 100%),
                linear-gradient(-45deg, var(--primary-600) 0%, transparent 50%, var(--primary-600) 100%),
                linear-gradient(90deg, transparent 0%, rgba(139, 92, 246, 0.4) 25%, transparent 50%, rgba(6, 182, 212, 0.4) 75%, transparent 100%),
                linear-gradient(135deg, var(--primary-500) 0%, var(--primary-600) 100%),
                radial-gradient(ellipse 1200px 800px at 20% 20%, rgba(139, 92, 246, 0.5) 0%, transparent 50%),
                radial-gradient(ellipse 800px 1200px at 80% 80%, rgba(6, 182, 212, 0.4) 0%, transparent 50%),
                radial-gradient(ellipse 600px 600px at 50% 50%, rgba(16, 185, 129, 0.3) 0%, transparent 70%),
                radial-gradient(ellipse 600px 600px at 10% 80%, rgba(245, 158, 11, 0.3) 0%, transparent 60%),
                repeating-linear-gradient(45deg, transparent, transparent 2px, rgba(255, 255, 255, 0.08) 2px, rgba(255, 255, 255, 0.08) 4px),
                repeating-linear-gradient(-45deg, transparent, transparent 4px, rgba(255, 255, 255, 0.04) 4px, rgba(255, 255, 255, 0.04) 8px) !important;
            border-radius: var(--radius-2xl) !important;
            padding: var(--space-8) !important;
            color: white !important;
            border: 1px solid rgba(255, 255, 255, 0.2) !important;
            backdrop-filter: blur(20px) !important;
            -webkit-backdrop-filter: blur(20px) !important;
            box-shadow: 
                0 20px 25px -5px rgba(0, 0, 0, 0.1), 
                0 10px 10px -5px rgba(0, 0, 0, 0.04),
                0 0 0 1px rgba(255, 255, 255, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.4),
                0 0 60px rgba(99, 102, 241, 0.4),
                0 0 120px rgba(99, 102, 241, 0.2) !important;
        }

        /* ULTIMATE FORCE ALL TEXT WHITE */
        html body .enhanced-knowledge-hub *:not(input):not(select):not(textarea):not(.search-input),
        html body .enhanced-knowledge-hub.spectacular-mode *:not(input):not(select):not(textarea):not(.search-input),
        html body .enhanced-knowledge-hub h1,
        html body .enhanced-knowledge-hub h2,
        html body .enhanced-knowledge-hub h3,
        html body .enhanced-knowledge-hub h4,
        html body .enhanced-knowledge-hub h5,
        html body .enhanced-knowledge-hub h6,
        html body .enhanced-knowledge-hub p,
        html body .enhanced-knowledge-hub span,
        html body .enhanced-knowledge-hub div,
        html body .enhanced-knowledge-hub .insight-title,
        html body .enhanced-knowledge-hub .section-title,
        html body .enhanced-knowledge-hub .hub-title,
        html body .enhanced-knowledge-hub .resource-title,
        html body .enhanced-knowledge-hub .stat-label,
        html body .enhanced-knowledge-hub .confidence-text,
        html body .enhanced-knowledge-hub .insight-description,
        html body .enhanced-knowledge-hub .resource-summary {
            color: white !important;
        }

        /* ULTIMATE FORCE ALL CARDS GLASS MORPHISM */
        html body .enhanced-knowledge-hub .ai-insight-card,
        html body .enhanced-knowledge-hub .analytics-card,
        html body .enhanced-knowledge-hub .learning-path-card,
        html body .enhanced-knowledge-hub .enhanced-resource-card,
        html body .enhanced-knowledge-hub .resource-card,
        html body .enhanced-knowledge-hub .insight-card,
        html body .enhanced-knowledge-hub .stat-card,
        html body .enhanced-knowledge-hub .card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0.08) 100%) !important;
            backdrop-filter: blur(15px) !important;
            -webkit-backdrop-filter: blur(15px) !important;
            border: 1px solid rgba(255, 255, 255, 0.2) !important;
            color: white !important;
            border-radius: var(--radius-xl) !important;
            padding: var(--space-5) !important;
            box-shadow: 0 8px 20px rgba(99, 102, 241, 0.2) !important;
        }

        /* ULTIMATE FORCE SECTIONS TRANSPARENT */
        html body .enhanced-knowledge-hub .ai-insights-section,
        html body .enhanced-knowledge-hub .learning-analytics,
        html body .enhanced-knowledge-hub .learning-paths-section,
        html body .enhanced-knowledge-hub .resources-section,
        html body .enhanced-knowledge-hub .section {
            background: transparent !important;
            background-color: transparent !important;
        }

        /* ULTIMATE FORCE BUTTONS */
        html body .enhanced-knowledge-hub button,
        html body .enhanced-knowledge-hub .btn,
        html body .enhanced-knowledge-hub .resource-btn,
        html body .enhanced-knowledge-hub .insight-action-btn {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0.2)) !important;
            color: white !important;
            border: 1px solid rgba(255, 255, 255, 0.3) !important;
            border-radius: var(--radius-lg) !important;
        }

        /* ULTIMATE FORCE BADGES */
        html body .enhanced-knowledge-hub .badge,
        html body .enhanced-knowledge-hub .tag,
        html body .enhanced-knowledge-hub .resource-tag,
        html body .enhanced-knowledge-hub .impact-badge,
        html body .enhanced-knowledge-hub .confidence-indicator,
        html body .enhanced-knowledge-hub .priority-badge {
            background: rgba(255, 255, 255, 0.2) !important;
            color: white !important;
            border: 1px solid rgba(255, 255, 255, 0.3) !important;
        }

        /* ULTIMATE REMOVE WHITE BACKGROUNDS */
        html body .enhanced-knowledge-hub *:not(input):not(select):not(textarea):not(.search-input):not(.search-icon) {
            background-color: transparent !important;
        }

        /* FORCE GRIDS TO DISPLAY */
        html body .enhanced-knowledge-hub .ai-insights-grid,
        html body .enhanced-knowledge-hub .analytics-grid,
        html body .enhanced-knowledge-hub .learning-paths-grid,
        html body .enhanced-knowledge-hub .resources-container {
            display: grid !important;
            background: transparent !important;
        }

        /* OVERRIDE ANY INLINE STYLES */
        html body .enhanced-knowledge-hub [style*="background: white"],
        html body .enhanced-knowledge-hub [style*="background-color: white"],
        html body .enhanced-knowledge-hub [style*="background: #fff"],
        html body .enhanced-knowledge-hub [style*="background-color: #fff"],
        html body .enhanced-knowledge-hub [style*="background: #ffffff"],
        html body .enhanced-knowledge-hub [style*="background-color: #ffffff"] {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0.08) 100%) !important;
            backdrop-filter: blur(15px) !important;
        }

        html body .enhanced-knowledge-hub [style*="color: black"],
        html body .enhanced-knowledge-hub [style*="color: #000"],
        html body .enhanced-knowledge-hub [style*="color: #000000"],
        html body .enhanced-knowledge-hub [style*="color: rgb(0, 0, 0)"] {
            color: white !important;
        }
    </style>

</head>
<body class="custom-scrollbar loading">
    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h2>Loading Quantum Forge...</h2>
            <p>Preparing your enhanced digital workspace</p>
        </div>
    </div>
    
    <script>
        // SIMPLE LOADING SCREEN FIX
        setTimeout(() => {
            const loadingScreen = document.getElementById('loading-screen');
            if (loadingScreen) {
                loadingScreen.style.display = 'none';
            }
        }, 100);
    </script>
    
    <script>
        console.log('🚀 Quantum Forge loading...');
        
        // Global loading screen management
        let loadingScreenHidden = false;
        
        function hideLoadingScreen() {
            if (loadingScreenHidden) return;
            loadingScreenHidden = true;
            
            const loadingScreen = document.getElementById('loading-screen');
            if (loadingScreen) {
                loadingScreen.style.opacity = '0';
                setTimeout(() => {
                    loadingScreen.style.display = 'none';
                    document.body.classList.remove('loading');
                    document.body.style.overflow = 'auto';
                    console.log('✅ Loading screen hidden');
                }, 300);
            } else {
                document.body.classList.remove('loading');
                document.body.style.overflow = 'auto';
            }
        }
        
        // Make function globally available
        window.hideLoadingScreen = hideLoadingScreen;
        
        // Ensure loading screen is visible initially
        const loadingScreen = document.getElementById('loading-screen');
        if (loadingScreen) {
            loadingScreen.style.display = 'flex';
            console.log('✅ Loading screen active');
        }
        
        // Multiple triggers to hide loading screen
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOM loaded, hiding loading screen in 1 second...');
            setTimeout(hideLoadingScreen, 1000);
        });
        
        window.addEventListener('load', () => {
            console.log('Window loaded, hiding loading screen...');
            hideLoadingScreen();
        });
        
        // Fallback timer
        setTimeout(() => {
            console.log('Fallback timer triggered, hiding loading screen...');
            hideLoadingScreen();
        }, 3000);

        // Simple fallback
        setTimeout(() => {
            const loadingScreen = document.getElementById('loading-screen');
            if (loadingScreen) {
                loadingScreen.style.display = 'none';
            }
            
            // Contest enhancement: Add subtle loading complete effect
            document.body.style.opacity = '0';
            document.body.style.transition = 'opacity 0.3s ease';
            setTimeout(() => {
                document.body.style.opacity = '1';
            }, 50);
        }, 200);
    </script>
    
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <!-- Live region for dynamic announcements -->
    <div aria-live="polite" aria-atomic="true" class="live-region" id="announcements"></div>
    
    <div class="dashboard" role="application">
        <!-- Header will be injected here -->
        <app-header></app-header>

        <div class="main-container">
            <!-- Enhanced Sidebar -->
            <app-sidebar></app-sidebar>

            <!-- Main Content -->
            <main id="main-content" class="main-content" role="main" aria-label="Main content">
                <!-- Enhanced Dashboard Grid -->
                <div class="dashboard-grid">
                    <!-- Welcome Section as first card -->
                    <div class="dashboard-item full-width">
                        <div class="welcome-section" role="region" aria-label="Welcome section">
                            <!-- Simplified background elements -->
                            <div class="particles">
                                <div class="particle"></div>
                                <div class="particle"></div>
                            </div>
                            
                            <div class="welcome-header">
                                <h1 class="welcome-title">
                                    <span class="greeting">Good afternoon</span>, <span class="user-name">Liz</span>
                                    <span class="welcome-emoji" role="img" aria-label="Waving hand">👋</span>
                                </h1>
                                <p class="welcome-subtitle">Your dream digital workspace is ready - let's make today extraordinary!</p>
                                <div class="welcome-status">
                                    <span class="status-indicator online"></span>
                                    <span class="status-text">All systems operational</span>
                                </div>
                            </div>

                            <div class="welcome-stats" role="group" aria-label="Quick statistics">
                                <div class="stat-item" role="status" aria-label="Active projects">
                                    <span class="stat-number">12</span>
                                    <span class="stat-label">Active Projects</span>
                                </div>
                                <div class="stat-item" role="status" aria-label="Team members online">
                                    <span class="stat-number">8</span>
                                    <span class="stat-label">Team Online</span>
                                </div>
                                <div class="stat-item" role="status" aria-label="Today's meetings">
                                    <span class="stat-number">3</span>
                                    <span class="stat-label">Today's Meetings</span>
                                </div>
                                <div class="stat-item" role="status" aria-label="Tasks completed">
                                    <span class="stat-number">24</span>
                                    <span class="stat-label">Tasks Done</span>
                                </div>
                                <div class="stat-item warning" role="status" aria-label="Tasks due today">
                                    <span class="stat-number">5</span>
                                    <span class="stat-label">Due Today</span>
                                </div>
                                <div class="stat-item error" role="status" aria-label="Overdue tasks">
                                    <span class="stat-number">2</span>
                                    <span class="stat-label">Overdue</span>
                                </div>
                            </div>
                            
                            <div class="quick-actions" role="toolbar" aria-label="Quick actions">
                                <button class="btn primary" data-tooltip="Create a new task" data-shortcut="Ctrl+N" aria-label="Create new task">
                                    <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                        <line x1="12" y1="8" x2="12" y2="16"></line>
                                        <line x1="8" y1="12" x2="16" y2="12"></line>
                                    </svg>
                                    New Task
                                </button>
                                <button class="btn secondary" data-tooltip="View your tasks" aria-label="My tasks">
                                    <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                                        <path d="M9 11l3 3L22 4"></path>
                                        <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>
                                    </svg>
                                    My Tasks
                                </button>
                                <button class="btn secondary" data-tooltip="Schedule a meeting" aria-label="Schedule">
                                    <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                        <line x1="16" y1="2" x2="16" y2="6"></line>
                                        <line x1="8" y1="2" x2="8" y2="6"></line>
                                        <line x1="3" y1="10" x2="21" y2="10"></line>
                                    </svg>
                                    Schedule
                                </button>
                                <button class="btn secondary" data-tooltip="View documents" aria-label="Documents">
                                    <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                        <polyline points="14 2 14 8 20 8"></polyline>
                                        <line x1="16" y1="13" x2="8" y2="13"></line>
                                        <line x1="16" y1="17" x2="8" y2="17"></line>
                                        <polyline points="10 9 9 9 8 9"></polyline>
                                    </svg>
                                    Documents
                                </button>
                            </div>

                            <div class="upcoming-events">
                                <h2 class="upcoming-events-title" style="display: flex !important; align-items: center !important; gap: 12px !important;">
                                    <svg class="custom-insights-icon" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" aria-hidden="true" style="color: white !important; stroke: white !important; background: rgba(255, 255, 255, 0.1); border-radius: 6px; padding: 6px; transition: all 0.3s ease;">
                                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
                                    </svg>
                                    Upcoming Events
                                </h2>
                                <div class="events-list">
                                    <div class="event-card">
                                        <div class="event-time">10:00 AM - 11:00 AM</div>
                                        <div class="event-title">Team Standup</div>
                                        <div class="event-participants">
                                            <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                                <circle cx="9" cy="7" r="4"></circle>
                                                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                                            </svg>
                                            8 participants
                                        </div>
                                    </div>
                                    <div class="event-card">
                                        <div class="event-time">2:00 PM - 3:00 PM</div>
                                        <div class="event-title">Project Review</div>
                                        <div class="event-participants">
                                            <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                                <circle cx="9" cy="7" r="4"></circle>
                                                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                                            </svg>
                                            5 participants
                                        </div>
                                    </div>
                                    <div class="event-card">
                                        <div class="event-time">4:00 PM - 5:00 PM</div>
                                        <div class="event-title">Design Workshop</div>
                                        <div class="event-participants">
                                            <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                                <circle cx="9" cy="7" r="4"></circle>
                                                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                                            </svg>
                                            12 participants
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- NEW: Enhanced Quick Insights -->
                            <div class="quick-insights">
                                <h3 class="insights-title" style="color: white !important;">
                                    <svg class="custom-insights-icon" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" aria-hidden="true" style="color: white !important; stroke: white !important; background: rgba(255, 255, 255, 0.1); border-radius: 6px; padding: 6px; transition: all 0.3s ease;">
                                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
                                    </svg>
                                    Today's Insights
                                </h3>
                                <div class="insights-grid">
                                    <div class="insight-card positive">
                                        <div class="insight-icon">
                                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                                                <path d="M23 6l-9.5 9.5-5-5L1 18"></path>
                                                <path d="M17 6h6v6"></path>
                                            </svg>
                                        </div>
                                        <div class="insight-content">
                                            <h4>Productivity Peak</h4>
                                            <p>Your team completed 15% more tasks than yesterday</p>
                                        </div>
                                    </div>
                                    <div class="insight-card info">
                                        <div class="insight-icon">
                                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                                <circle cx="9" cy="7" r="4"></circle>
                                                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                                            </svg>
                                        </div>
                                        <div class="insight-content">
                                            <h4>Team Collaboration</h4>
                                            <p>3 new team members joined your projects</p>
                                        </div>
                                    </div>
                                    <div class="insight-card warning">
                                        <div class="insight-icon">
                                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                                                <circle cx="12" cy="12" r="10"></circle>
                                                <polyline points="12 6 12 12 16 14"></polyline>
                                            </svg>
                                        </div>
                                        <div class="insight-content">
                                            <h4>Meeting Reminder</h4>
                                            <p>You have 2 meetings scheduled for today</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Analytics Dashboard - High Priority -->
                    <div class="dashboard-item full-width">
                        <analytics-dashboard></analytics-dashboard>
                    </div>

                    <!-- Task Management and Knowledge Hub - Core Productivity (Side by Side) -->
                    <div class="dashboard-row">
                        <div class="dashboard-item task-system-container">
                            <task-system></task-system>
                        </div>

                        <div class="dashboard-item knowledge-hub-container">
                            <enhanced-knowledge-hub></enhanced-knowledge-hub>
                        </div>
                    </div>

                    <!-- Team Communication and News - Social Layer -->
                    <div class="dashboard-item">
                        <company-news>
                            <div class="loading-placeholder">
                                <div class="loading-spinner"></div>
                                <p>Loading company news...</p>
                            </div>
                        </company-news>
                    </div>

                    <div class="dashboard-item">
                        <team-spotlight></team-spotlight>
                    </div>

                    <!-- Office Visualizer - Interactive Experience -->
                    <div class="dashboard-item full-width office-container">
                        <office-visualizer></office-visualizer>
                    </div>

                    <!-- Collaboration and Engagement Tools -->
                    <div class="dashboard-item">
                        <collaboration-hub></collaboration-hub>
                    </div>

                    <div class="dashboard-item">
                        <enhanced-interactive-poll></enhanced-interactive-poll>
                    </div>

                    <!-- Weather and Achievement - Ambient Info -->
                    <div class="dashboard-item">
                        <weather-widget></weather-widget>
                    </div>

                    <div class="dashboard-item">
                        <achievement-system></achievement-system>
                    </div>

                    <!-- Company Culture Showcase - Brand Experience -->
                    <div class="dashboard-item full-width">
                        <company-culture-showcase></company-culture-showcase>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Command Palette -->
    <command-palette></command-palette>

    <!-- AI Assistant -->
    <ai-assistant></ai-assistant>

    <!-- Team Chat Widget -->
    <team-chat-widget></team-chat-widget>

    <!-- Smart Search Overlay -->
    <smart-search-overlay></smart-search-overlay>

    <!-- Performance Monitoring -->
    <script>
        // Initialize page-specific functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Start analytics service
            if (window.analyticsService) {
                window.analyticsService.generateMockData();
            }

            // Performance monitoring
            window.addEventListener('load', () => {
                window.performance.mark('app-loaded');
                window.performance.measure('app-load-time', 'app-start', 'app-loaded');
                
                const loadTime = performance.getEntriesByName('app-load-time')[0];
                console.log(`App loaded in ${loadTime.duration}ms`);
            });
        });
    </script>

    <!-- Scripts - Restored Working Order -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/services/performance-monitor.js"></script>
    <script src="js/services/performance-manager.js"></script>
    <script src="js/services/chart-manager.js"></script>
    <script src="js/services/analytics.js"></script>
    <script src="js/app.js"></script>
    <script src="js/components/header.js"></script>
    <script src="js/components/sidebar.js"></script>
    <script src="js/components/analytics-dashboard.js"></script>
    <script src="js/components/task-system.js"></script>
    <script src="js/components/weather-widget.js"></script>
    <script src="js/components/company-news.js"></script>
    <script src="js/components/interactive-poll.js"></script>
    <script src="js/components/real-time-stats.js"></script>
    <script src="js/components/team-spotlight.js"></script>
    <script src="js/components/smart-quick-access.js"></script>
    <script src="js/components/command-palette.js"></script>
    <script src="js/components/ai-assistant.js"></script>
    <script src="js/components/achievement-system.js"></script>
    <script src="js/components/collaboration-hub.js"></script>
    <script src="js/components/office-visualizer.js?v=3"></script>
    <script src="js/components/enhanced-knowledge-hub.js"></script>
    <script src="js/components/help-dialog.js"></script>
    <script src="js/components/company-culture-showcase.js"></script>
    <script src="js/components/enhanced-interactive-poll.js"></script>
    <script src="js/components/team-chat-widget.js"></script>
    <script src="js/components/smart-search-overlay.js"></script>
    <script src="js/components/simple-color-picker.js"></script>
    
</body>
</html>