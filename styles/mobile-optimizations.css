/* ðŸ“± CONSOLIDATED Mobile Optimizations */
/* Combined from mobile-optimizations.css, simple-mobile.css, and mobile-performance-enhancements.css */
/* Duplicate :root variables moved to critical-fixes.css to avoid conflicts */

/* Mobile-First Performance Optimizations */
@media (max-width: var(--breakpoint-md)) {

    /* Disable expensive animations on mobile */
    .welcome-section::before,
    .welcome-section::after,
    .enhanced-task-system::before,
    .enhanced-task-system::after,
    .particle,
    .sparkle {
        animation: none !important;
        display: none !important;
    }

    /* Simplify backgrounds for better performance */
    .welcome-section,
    .enhanced-task-system,
    .analytics-dashboard,
    .enhanced-knowledge-hub {
        background: linear-gradient(135deg, var(--primary-500) 0%, var(--primary-600) 100%) !important;
        backdrop-filter: none !important;
        -webkit-backdrop-filter: none !important;
    }

    /* Optimize font rendering */
    body {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeSpeed;
    }

    /* Reduce box shadows for performance */
    .dashboard-item,
    .stat-card,
    .btn,
    .card {
        box-shadow: var(--mobile-shadow-light) !important;
    }

    /* Simplify hover effects */
    .dashboard-item:hover,
    .stat-card:hover {
        transform: none !important;
        box-shadow: var(--mobile-shadow-medium) !important;
    }

    /* Optimize image loading */
    img {
        image-rendering: optimizeSpeed;
        image-rendering: -webkit-optimize-contrast;
    }

    /* Better touch targets */
    .btn,
    .nav-link,
    .stat-card {
        min-height: 44px;
        min-width: 44px;
        padding: var(--space-3) var(--space-4);
    }

    /* Simplified transitions */
    * {
        transition: all 0.2s ease !important;
    }

    /* Hide unnecessary elements on small screens */
    .particle-system,
    .sparkle-container,
    .aurora-effect,
    .constellation,
    .wave-distortion {
        display: none !important;
    }
}

/* Very Small Screens (480px and below) */
@media (max-width: var(--breakpoint-sm)) {

    /* Ultra-compact layout */
    .main-content {
        padding: var(--space-2) !important;
    }

    .welcome-section {
        padding: var(--space-3) !important;
        margin-bottom: var(--space-3) !important;
    }

    .welcome-title {
        font-size: var(--font-size-xl) !important;
        text-align: center !important;
    }

    .welcome-subtitle {
        font-size: var(--font-size-sm) !important;
        text-align: center !important;
    }

    .welcome-stats {
        grid-template-columns: 1fr 1fr !important;
        gap: var(--space-2) !important;
    }

    .stat-number {
        font-size: var(--font-size-lg) !important;
    }

    .stat-label {
        font-size: var(--font-size-xs) !important;
    }

    /* Dashboard grid mobile styles moved to main.css to eliminate duplication */

    /* Compact forms */
    .form-input,
    .enhanced-select {
        padding: var(--space-2) !important;
        font-size: var(--font-size-sm) !important;
    }

    /* Stack quick actions */
    .quick-actions {
        flex-direction: column !important;
        gap: var(--space-2) !important;
    }

    .btn {
        width: 100%;
        justify-content: center;
    }
}

/* Landscape Mobile Optimization */
@media (max-width: var(--breakpoint-md)) and (orientation: landscape) {
    .welcome-section {
        padding: var(--space-4) var(--space-6) !important;
    }

    .welcome-stats {
        grid-template-columns: repeat(4, 1fr) !important;
    }

    /* Dashboard grid landscape styles moved to main.css */
}

/* Touch Device Optimizations */
@media (pointer: coarse) {

    /* Larger touch targets */
    .btn,
    .nav-link,
    .action-button,
    .view-btn {
        min-height: 44px !important;
        min-width: 44px !important;
        padding: var(--space-3) var(--space-4) !important;
        border-radius: var(--radius-lg) !important;
    }

    /* Better spacing for thumbs */
    .quick-actions {
        gap: var(--space-4) !important;
    }

    .nav-item {
        margin-bottom: var(--space-2) !important;
    }

    /* Prevent text selection on UI elements */
    .btn,
    .nav-link,
    .stat-card,
    .dashboard-item {
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
        -webkit-touch-callout: none;
    }

    /* Optimize tap highlights */
    .btn,
    .nav-link {
        -webkit-tap-highlight-color: rgba(99, 102, 241, 0.2);
        tap-highlight-color: rgba(99, 102, 241, 0.2);
    }

    /* Better hover states for touch */
    .btn:active,
    .stat-card:active {
        transform: scale(0.98) !important;
        transition: transform 0.1s ease !important;
    }
}

/* Reduce Motion Preferences */
@media (prefers-reduced-motion: reduce) {

    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.2s !important;
        scroll-behavior: auto !important;
    }

    .particle,
    .sparkle,
    .aurora-effect {
        display: none !important;
    }
}

/* Battery Optimization */
@media (prefers-reduced-data: reduce) {

    /* Disable background images */
    .welcome-section,
    .enhanced-task-system,
    .analytics-dashboard {
        background-image: none !important;
        background: var(--primary-600) !important;
    }

    /* Hide decorative elements */
    .particle-system,
    .sparkle-container,
    .decorative-element {
        display: none !important;
    }

    /* Simplify borders */
    .dashboard-item,
    .card {
        border: 1px solid var(--border-color) !important;
        box-shadow: none !important;
    }
}

/* High DPI Display Optimizations */
@media (-webkit-min-device-pixel-ratio: 2),
(min-resolution: 192dpi) {

    /* Sharper text rendering */
    body {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
    }

    /* Optimize borders for high DPI */
    .dashboard-item,
    .card,
    .btn {
        border-width: 0.5px;
    }

    /* Better icon rendering */
    .icon,
    svg {
        shape-rendering: geometricPrecision;
    }
}

/* Dark Mode Mobile Optimizations */
@media (max-width: var(--breakpoint-md)) and (prefers-color-scheme: dark) {

    .welcome-section,
    .enhanced-task-system,
    .analytics-dashboard {
        background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%) !important;
        border-color: rgba(255, 255, 255, 0.1) !important;
    }

    .stat-card,
    .dashboard-item {
        background: rgba(30, 41, 59, 0.8) !important;
        border-color: rgba(255, 255, 255, 0.1) !important;
    }
}

/* Performance Mode for Slower Devices */
.performance-mode .welcome-section,
.performance-mode .enhanced-task-system,
.performance-mode .analytics-dashboard {
    background: var(--primary-600) !important;
    background-image: none !important;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
}

.performance-mode * {
    animation: none !important;
    transition: none !important;
    transform: none !important;
    filter: none !important;
}

.performance-mode .particle,
.performance-mode .sparkle,
.performance-mode .aurora-effect {
    display: none !important;
}

/* Mobile Sidebar Optimizations - handled in sidebar.css to avoid conflicts */
@media (max-width: var(--breakpoint-lg)) {
    /* Sidebar mobile behavior consolidated in sidebar.css */

    /* Mobile overlay */
    .nav-open::before {
        content: '' !important;
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        background: rgba(0, 0, 0, 0.5) !important;
        z-index: 999 !important;
        opacity: 1 !important;
        transition: opacity 0.3s ease !important;
    }

    /* Prevent body scroll when menu is open */
    .nav-open {
        overflow: hidden !important;
        position: fixed !important;
        width: 100% !important;
    }
}

/* Battery and Data Saver Optimizations */
.mobile-optimized {
    /* Disable all animations */
    animation: none !important;
    transition: none !important;
}

.mobile-optimized * {
    animation: none !important;
    transition: none !important;
    transform: none !important;
    filter: none !important;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
}

.mobile-optimized .particle,
.mobile-optimized .sparkle,
.mobile-optimized .aurora-effect,
.mobile-optimized .constellation,
.mobile-optimized .wave-distortion {
    display: none !important;
}

/* Improve scrolling performance */
.dashboard-grid,
.main-content {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
}

/* Optimize for notched displays */
@supports (padding: max(0px)) {
    .header {
        padding-left: max(var(--space-4), env(safe-area-inset-left));
        padding-right: max(var(--space-4), env(safe-area-inset-right));
        margin: 0;
    }

    .main-content {
        padding-left: max(var(--space-4), env(safe-area-inset-left));
        padding-right: max(var(--space-4), env(safe-area-inset-right));
        padding-bottom: max(var(--space-4), env(safe-area-inset-bottom));
    }
}

/* iOS Safari specific optimizations */
@supports (-webkit-touch-callout: none) {
    .header {
        backdrop-filter: saturate(180%) blur(20px);
        -webkit-backdrop-filter: saturate(180%) blur(20px);
    }

    /* Fix iOS viewport height issues */
    .main-container {
        min-height: -webkit-fill-available;
    }

    /* Prevent zoom on input focus */
    .form-input,
    .enhanced-select {
        font-size: 16px !important;
    }
}

/* ===== CONSOLIDATED CONTENT FROM simple-mobile.css ===== */
/* Simple Mobile Enhancements - Only applies on mobile, preserves desktop design */

/* Touch-friendly mobile adjustments (max-width: 767px) */
@media (max-width: 767px) {

    /* Mobile Color Picker Position */
    .simple-color-toggle {
        top: 10px !important;
        right: 10px !important;
        width: 45px !important;
        height: 45px !important;
        font-size: 18px !important;
    }

    .simple-color-panel {
        top: 65px !important;
        right: 10px !important;
        width: calc(100vw - 20px) !important;
        max-width: 280px !important;
    }

    /* Dashboard grid styles moved to critical-fixes.css to avoid duplication */

    /* Mobile Main Content - Slight padding adjustment */
    .main-content {
        padding: 1rem !important;
    }

    /* Mobile Dashboard Items - Touch friendly */
    .dashboard-item {
        padding: 1.25rem !important;
    }

    .dashboard-item:active {
        transform: scale(0.98);
        transition: transform 0.1s ease;
    }

    /* Mobile Buttons - Touch friendly */
    .btn {
        min-height: 44px;
        padding: 0.75rem 1rem;
        font-size: 0.9rem;
    }

    /* Mobile Typography - Slightly smaller */
    .welcome-section h1 {
        font-size: 1.75rem !important;
        line-height: 1.2;
    }

    .welcome-section p {
        font-size: 1rem !important;
    }

    /* Mobile Stats - Better spacing */
    .stat-value {
        font-size: 1.5rem !important;
    }

    .stat-label {
        font-size: 0.875rem !important;
    }
}

/* Touch devices - Remove hover effects */
@media (hover: none) and (pointer: coarse) {
    .dashboard-item:hover {
        transform: none !important;
    }

    .btn:hover {
        transform: none !important;
    }
}

/* ===== CONSOLIDATED CONTENT FROM mobile-performance-enhancements.css ===== */
/* Task System Performance Optimizations */
@media (max-width: var(--breakpoint-md)) {
    .enhanced-task-system {
        .ai-insights-grid {
            grid-template-columns: 1fr !important;
            gap: var(--space-3) !important;
        }

        .task-cards-grid {
            grid-template-columns: 1fr !important;
            gap: var(--space-4) !important;
        }

        .enhanced-task-card {
            padding: var(--space-4) !important;
            margin-bottom: var(--space-3) !important;
            box-shadow: var(--mobile-shadow-light) !important;
            border-radius: var(--radius-lg) !important;
            transition: all var(--mobile-animation-duration) var(--mobile-transition-timing) !important;
        }

        .enhanced-task-card:active {
            transform: scale(0.98) !important;
            box-shadow: var(--mobile-shadow-medium) !important;
        }

        .task-controls {
            flex-direction: column !important;
            gap: var(--space-3) !important;
        }

        .search-and-filters {
            flex-direction: column !important;
            gap: var(--space-3) !important;
        }

        .filter-controls {
            display: grid !important;
            grid-template-columns: 1fr 1fr !important;
            gap: var(--space-2) !important;
        }

        .task-analytics {
            display: none !important;
        }
    }

    /* Analytics Dashboard Mobile */
    .analytics-dashboard {
        .kpi-grid {
            grid-template-columns: repeat(2, 1fr) !important;
            gap: var(--space-3) !important;
        }

        .advanced-kpi-card {
            padding: var(--space-3) !important;
            backdrop-filter: none !important;
            -webkit-backdrop-filter: none !important;

            .kpi-progress {
                height: 4px !important;
            }
        }

        .enhanced-charts-grid {
            grid-template-columns: 1fr !important;
            gap: var(--space-4) !important;
        }

        .chart-container .chart-body {
            height: 200px !important;
        }

        .chart-container .chart-controls {
            display: none !important;
        }

        .heatmap-section {
            display: none !important;
        }

        .activity-section .activity-controls {
            overflow-x: auto !important;
            -webkit-overflow-scrolling: touch !important;
        }
    }

    /* Enhanced Knowledge Hub Mobile */
    .enhanced-knowledge-hub {
        .resources-grid {
            grid-template-columns: 1fr !important;
            gap: var(--space-3) !important;
        }

        .resource-card {
            padding: var(--space-3) !important;
            margin-bottom: var(--space-2) !important;
        }

        .search-interface {
            flex-direction: column !important;
            gap: var(--space-2) !important;
        }

        .filter-tabs {
            overflow-x: auto !important;
            -webkit-overflow-scrolling: touch !important;
        }
    }
}
