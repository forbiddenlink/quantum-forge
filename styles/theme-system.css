/* Theme System 2.0 - Contest Enhancement */
:root {
    /* Core HSL Values - Default Purple */
    --primary-h: 270;
    --primary-s: 80%;
    --primary-l: 50%;

    /* Text Colors */
    --text-primary: hsl(0, 0%, 10%);
    --text-secondary: hsl(0, 0%, 40%);
    --text-muted: hsl(0, 0%, 60%);
    --text-on-primary: white;

    /* Theme Colors - Using HSL Variables */
    --primary-50: hsl(var(--primary-h), var(--primary-s), 95%);
    --primary-100: hsl(var(--primary-h), var(--primary-s), 90%);
    --primary-200: hsl(var(--primary-h), var(--primary-s), 80%);
    --primary-300: hsl(var(--primary-h), var(--primary-s), 70%);
    --primary-400: hsl(var(--primary-h), var(--primary-s), 60%);
    --primary-500: hsl(var(--primary-h), var(--primary-s), var(--primary-l));
    --primary-600: hsl(var(--primary-h), var(--primary-s), 40%);
    --primary-700: hsl(var(--primary-h), var(--primary-s), 30%);

    /* Transition System */
    --theme-transition-duration: 0.2s;
    --theme-transition-timing: cubic-bezier(0.4, 0, 0.2, 1);
    --theme-transition: background-color var(--theme-transition-duration) var(--theme-transition-timing),
        color var(--theme-transition-duration) var(--theme-transition-timing),
        border-color var(--theme-transition-duration) var(--theme-transition-timing),
        box-shadow var(--theme-transition-duration) var(--theme-transition-timing),
        transform var(--theme-transition-duration) var(--theme-transition-timing);

    /* Theme Colors - Using HSL Variables */
    --primary-50: hsl(var(--primary-h), var(--primary-s), 95%);
    --primary-100: hsl(var(--primary-h), var(--primary-s), 90%);
    --primary-200: hsl(var(--primary-h), var(--primary-s), 80%);
    --primary-300: hsl(var(--primary-h), var(--primary-s), 70%);
    --primary-400: hsl(var(--primary-h), var(--primary-s), 60%);
    --primary-500: hsl(var(--primary-h), var(--primary-s), var(--primary-l));
    --primary-600: hsl(var(--primary-h), var(--primary-s), 40%);
    --primary-700: hsl(var(--primary-h), var(--primary-s), 30%);
    --primary-800: hsl(var(--primary-h), var(--primary-s), 20%);
    --primary-900: hsl(var(--primary-h), var(--primary-s), 10%);

    /* Component Color System */
    --button-primary: var(--primary-500);
    --button-primary-hover: var(--primary-600);
    --link-color: var(--primary-500);
    --link-hover: var(--primary-600);
    --accent-color: var(--primary-500);
    --accent-light: var(--primary-400);
    --accent-dark: var(--primary-600);

    /* Background System */
    --bg-primary: white;
    --bg-secondary: hsl(0, 0%, 98%);
    --bg-tertiary: hsl(0, 0%, 96%);
    --bg-hover: hsl(0, 0%, 94%);
}

/* Force Hardware Acceleration */
body {
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000px;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* Reset transitions during theme changes */
.theme-transition,
.theme-transition * {
    transition: none !important;
}

/* Global Theme Transitions */
*:not(script):not(style):not(link) {
    transition: var(--theme-transition);
}

/* Dark Mode Overrides */
[data-theme="dark"] {
    /* Text Colors */
    --text-primary: hsl(0, 0%, 90%);
    --text-secondary: hsl(0, 0%, 70%);
    --text-muted: hsl(0, 0%, 50%);

    /* Background System */
    --bg-primary: hsl(0, 0%, 10%);
    --bg-secondary: hsl(0, 0%, 15%);
    --bg-tertiary: hsl(0, 0%, 20%);
    --bg-hover: hsl(0, 0%, 25%);

    /* Adjust component colors for dark mode */
    --color-primary-50: hsl(var(--primary-h), var(--primary-s), 15%);
    --color-primary-100: hsl(var(--primary-h), var(--primary-s), 20%);
    --color-primary-200: hsl(var(--primary-h), var(--primary-s), 30%);
    --color-primary-300: hsl(var(--primary-h), var(--primary-s), 40%);
    --color-primary-400: hsl(var(--primary-h), var(--primary-s), 50%);
    --color-primary-600: hsl(var(--primary-h), var(--primary-s), 70%);
    --color-primary-700: hsl(var(--primary-h), var(--primary-s), 80%);
    --color-primary-800: hsl(var(--primary-h), var(--primary-s), 90%);
    --color-primary-900: hsl(var(--primary-h), var(--primary-s), 95%);
}

/* Critical Theme Overrides */
.btn,
.button,
[class*="btn-"],
[class*="button-"] {
    background-color: var(--button-primary);
    color: var(--text-on-primary);
    transition: var(--theme-transition);
}

.btn:hover,
.button:hover,
[class*="btn-"]:hover,
[class*="button-"]:hover {
    background-color: var(--button-primary-hover);
}

a:not([class]) {
    color: var(--link-color);
    transition: var(--theme-transition);
}

a:not([class]):hover {
    color: var(--link-hover);
}

/* Theme-aware Icons */
svg:not([class*="custom-color"]) {
    color: currentColor;
    stroke: currentColor;
    fill: currentColor;
    transition: var(--theme-transition);
}

/* Force color updates on specific elements */
[class*="event-"],
[class*="card-"],
[class*="badge-"],
[class*="tag-"],
[class*="status-"],
[class*="action-"],
[class*="progress-"],
[class*="insight-"] {
    color: var(--text-primary);
    background-color: transparent;
    border-color: currentColor;
    transition: var(--theme-transition);
}